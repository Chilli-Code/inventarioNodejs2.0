<%
// lista de planes (puedes traerla desde tu backend)
const plans = [
  {
    badge: "Best Value",
    name: "Pro",
    price: "$79",
    period: "/month",
    buttonClass: "btn btn-primary",
    buttonText: "Choose Plan",
    features: [
      "Everything in Basic",
      "Advanced Reporting",
      "Priority Customer Support"
    ]
  },
  {
    name: "Basic",
    price: "$29",
    period: "/month",
    buttonClass: "btn btn-secondary",
    buttonText: "Choose Plan",
    features: [
      "Inventory Management",
      "Sales Tracking",
      "Basic Reporting"
    ]
  },
  {
    name: "Enterprise",
    price: "Custom",
    period: "",
    buttonClass: "btn btn-secondary",
    buttonText: "Contact Us",
    features: [
      "Everything in Pro",
      "Dedicated Support",
      "API Access"
    ]
  }
];
%>

<section class="pricing-section" id="precios">
    <% if (!isMobile) { %>
        <svg class="svg-container">
            <defs>
                <filter id="turbulent-displace" colorinterpolationfilters="sRGB" x="-20%" y="-20%" width="140%"
                    height="140%">
                    <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="1">
                    </feTurbulence>
                    <feOffset in="noise1" dx="0" dy="0" result="offsetNoise1">
                        <animate attributeName="dy" values="700; 0" dur="6s" repeatCount="indefinite"
                            calcMode="linear"></animate>
                    </feOffset>

                    <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="1">
                    </feTurbulence>
                    <feOffset in="noise2" dx="0" dy="0" result="offsetNoise2">
                        <animate attributeName="dy" values="0; -700" dur="6s" repeatCount="indefinite"
                            calcMode="linear"></animate>
                    </feOffset>

                    <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise1" seed="2">
                    </feTurbulence>
                    <feOffset in="noise1" dx="0" dy="0" result="offsetNoise3">
                        <animate attributeName="dx" values="490; 0" dur="6s" repeatCount="indefinite"
                            calcMode="linear"></animate>
                    </feOffset>

                    <feTurbulence type="turbulence" baseFrequency="0.02" numOctaves="10" result="noise2" seed="2">
                    </feTurbulence>
                    <feOffset in="noise2" dx="0" dy="0" result="offsetNoise4">
                        <animate attributeName="dx" values="0; -490" dur="6s" repeatCount="indefinite"
                            calcMode="linear"></animate>
                    </feOffset>

                    <feComposite in="offsetNoise1" in2="offsetNoise2" result="part1"></feComposite>
                    <feComposite in="offsetNoise3" in2="offsetNoise4" result="part2"></feComposite>
                    <feBlend in="part1" in2="part2" mode="color-dodge" result="combinedNoise"></feBlend>

                    <feDisplacementMap in="SourceGraphic" in2="combinedNoise" scale="30" xChannelSelector="R"
                        yChannelSelector="B"></feDisplacementMap>
                </filter>
            </defs>
        </svg>
        <% } %>
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Pricing Plans</h2>
      <p class="section-subtitle">Choose a plan that fits your business needs.</p>
    </div>
    <div class="pricing-grid">
      <% plans.forEach(plan => { %>
        <div class="pricing-card card-container tilt-card">
          <div class="inner-container">
            <div class="border-outer">
              <div class="main-card"></div>
            </div>
            <div class="glow-layer-1"></div>
            <div class="glow-layer-2"></div>
          </div>
          <div class="overlay-1"></div>
          <div class="overlay-2"></div>
          <div class="background-glow"></div>
          <div class="content-container">
            <% if (plan.badge) { %>
              <p class="pricing-badge pop-out"><%= plan.badge %></p>
            <% } %>
            <div class="pricing-header">
              <div class="hf">
                <div class="scrollbar-glass">
                  <h3 class="plan-name pop-out"><%= plan.name %></h3>
                </div>
              </div>
              <p class="plan-price">
                <span class="price-amount pop-out"><%= plan.price %></span>
                <% if (plan.period) { %>
                  <span class="price-period pop-out"><%= plan.period %></span>
                <% } %>
              </p>
            </div>
            <div class="pricing-features">
              <% plan.features.forEach(feature => { %>
                <div class="pricing-feature pop-out">
                  <!-- Ã­cono check -->
                  <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#10b981">
                    <path d="m424-296 282-282-56-56-226 226-114-114-56 56 170 170Zm56 216q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
                  </svg>
                  <%= feature %>
                </div>
              <% }); %>
            </div>
            <div class="botonPrice pop-out">
              <button class="<%= plan.buttonClass %> pricing-button"><%= plan.buttonText %></button>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </div>
</section>
